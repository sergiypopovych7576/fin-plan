<div *ngIf="!operations" class="d-flex p-2">
	<mat-spinner class="m-auto"></mat-spinner>
</div>
<div class="text-center h-100 d-flex" *ngIf="!operations.length; else grid">
	<p class="m-auto">No operations were found</p>
</div>
<ng-template #grid>
	<div class="d-flex pl-2 pr-2 pb-2 mb-1 mt-2 justify-around">
		<div *ngFor="let col of displayedColumns" [style.width.%]="col.width">
			{{col.title}}
		</div>
	</div>
	<div class="item mb-2" *ngFor="let element of operations; let i = index;">
		<div class="bg-color-bg border pt-2 pb-2 pl-2 pr-2 d-flex justify-around" >
			<div class="col d-flex justify-left" [style.width.%]="displayedColumns[0].width">
				<fp-indicator [color]="element.category.color">
				</fp-indicator>
			</div>
			<div class="col" [style.width.%]="displayedColumns[1].width">
				{{ element.name }}
			</div>
			<div class="col" [style.width.%]="displayedColumns[2].width">
				@if (element.type === 2) {
					{{ element.targetAccount?.name }}
				}
				@if (element.type !== 2) {
					{{ element.sourceAccount?.name || element.targetAccount?.name}}
				}
			</div>
			<div class="col" [style.width.%]="displayedColumns[3].width">
				<div class="d-flex align-center">
					<mat-icon class="mr-1" [style.color]="element.category.color">{{ element.category.iconName }}</mat-icon>
					{{ element.category.name }}
				</div>
			</div>
			<div [style.width.%]="displayedColumns[4].width" [class.color-red]="element.type === 1" [class.color-green]="element.type === 0" class="col">
				{{ element | toOpCurrency:currency }}
			</div>
			<div class="col" [style.width.%]="displayedColumns[5].width">
				{{ element.date | date: 'dd/MM/yyyy'}}
			</div>
			<div class="col" [style.width.%]="displayedColumns[6].width">
				<button class="action-button" mat-icon-button [matMenuTriggerFor]="actionsMenu">
					<mat-icon>more_vert</mat-icon>
				</button>
				<mat-menu #actionsMenu="matMenu" class="actions-menu">
					<button mat-button (click)="onDeleteClick(element)"><mat-icon>delete</mat-icon>Delete</button>
				</mat-menu>
			</div>
		</div>
		<!-- <div class="mt-1 mb-1" *ngIf="i === operationSplitIndex - 1">

		</div> -->
	</div>
	<div class="table-container">
		
	</div>
	<!-- <div class="table-container d-flex h-100">
		<table *ngIf="operations" mat-table [dataSource]="operations">
			<ng-container matColumnDef="color">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let element" style="width: 5%">
					<fp-indicator [color]="element.category.color">
					</fp-indicator>
				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<ng-container matColumnDef="name" [sticky]="true">
				<th mat-header-cell *matHeaderCellDef>Name</th>
				<td mat-cell *matCellDef="let element" style="width: 27%">
					{{ element.name }}
				</td>
				<td mat-footer-cell *matFooterCellDef><b>Total</b></td>
			</ng-container>

			<ng-container matColumnDef="category" [sticky]="true">
				<th mat-header-cell *matHeaderCellDef>Category</th>
				<td mat-cell *matCellDef="let element" style="width: 27%">
					<div class="d-flex align-center">
						<mat-icon class="mr-1" [style.color]="element.category.color">{{ element.category.iconName
							}}</mat-icon>
						{{ element.category.name }}
					</div>

				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<ng-container matColumnDef="amount" [sticky]="true">
				<th mat-header-cell *matHeaderCellDef>Amount</th>
				<td mat-cell *matCellDef="let element" style="width: 20%" [class.color-red]="element.type === 1"
					[class.color-green]="element.type === 0" class="text-right">
					{{ element | toOpCurrency:'EUR' }}
				</td>
				<td mat-footer-cell *matFooterCellDef><b [class.color-red]="total < 0" [class.color-green]="total > 0">
						{{total | currency:'EUR'}}</b>
				</td>
			</ng-container>

			<ng-container matColumnDef="date" [sticky]="true">
				<th mat-header-cell *matHeaderCellDef>Date</th>
				<td mat-cell *matCellDef="let element" style="width: 15%">
					{{ element.date | date: 'dd/MM/yyyy'}}
				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<ng-container matColumnDef="actions">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let element" style="width: 5%">
					<button class="action-button" mat-icon-button [matMenuTriggerFor]="actionsMenu">
						<mat-icon>more_vert</mat-icon>
					</button>
					<mat-menu #actionsMenu="matMenu" class="actions-menu">
						<button mat-button (click)="onDeleteClick(element)"><mat-icon>delete</mat-icon>Delete</button>
					</mat-menu>
				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			<tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
		</table>
	</div> -->
	<fp-progress-bar *ngIf="loading" mode="indeterminate"></fp-progress-bar>
</ng-template>